<div class="classes-container">
  <div class="container-fluid">
    <div class="row">
      <div class="col-xs-12 col-md-6">
        <h2 class="section-title">
          <b>Cursos</b>
        </h2>
      </div>
      <!-- <div class="col-xs-12 col-md-6" ng-if="::!PERMISSIONS.student">
        <a ui-sref="class-new" class="btn btn-rounded btn-primary pull-right">Crear</a>
      </div> -->
    </div>
  </div>
  <div class="container-fluid">
    <br/>
    <!-- <div class="row" ng-if="vm.camadas.length">
      <div class="col-md-4">
        <div class="form-group">
          <label for="">Camadas</label>
          <select class="form-control" ng-model="vm.currentCamada">
            <option value="option" ng-repeat="item in vm.camadas track by item.id" ng-bind="item.id"></option>
          </select>
        </div>
      </div>
    </div> -->
    <div class="row" ng-if="vm.classes.length">
      <div class="col-md-4">
        <table class="table table-hover">
          <thead>
            <tr>
              <th ng-click="vm.onClickOrderBy('name')">Titulo</th>
              <th width="30%" ng-if="::PERMISSIONS.student" class="text-center">&nbsp;</th>
              <th width="5%" ng-if="::PERMISSIONS.admin" class="text-center">&nbsp;</th>
              <th width="5%" ng-if="::PERMISSIONS.admin" class="text-center"><a ng-click="vm.onClickUpsertClass($event)" class="btn btn-rounded btn-primary pull-right">Crear</a></th>
            </tr>
          </thead>
          <tbody>
            <tr ng-repeat="item in vm.classes | orderBy : vm.currentOrder track by $index" id="{{item._id}}" ng-class="{active: item._id === vm.currentClassId}">
              <td ng-bind="item.name" ng-click="vm.onClickShowStages($event, item)"></td>
              <td ng-if="::PERMISSIONS.student" class="text-center">
                <uib-progressbar ng-if="::item.progress > 0 && item.progress < 100" class="progress-striped text-center" value="item.progress"></uib-progressbar>
                <i ng-if="::item.progress >= 100" class="fa fa-check"></i>
              </td>
              <td ng-if="::PERMISSIONS.admin" class="btn-delete text-center" ng-click="vm.onClickUpsertClass($event, item)">
                <i class="fa fa-edit"></i>
              </td>
              <td ng-if="::PERMISSIONS.admin" class="btn-delete text-center" ng-click="vm.onClickRemove($event, item._id)">
                <i class="fa fa-times"></i>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="col-md-4" ng-if="vm.stages.length">
        <table class="table table-hover">
          <thead>
            <tr>
              <th>Clases </th>
              <!-- <th ng-if="::!PERMISSIONS.student" ng-click="vm.onClickOrderBy('order')">#</th> -->
              <th width="30%" ng-if="::PERMISSIONS.student" class="text-center">&nbsp;</th>
              <th width="5%" ng-if="::!PERMISSIONS.student" class="text-center">&nbsp;</th>
              <th width="5%" ng-if="::!PERMISSIONS.student" class="text-center">&nbsp;</th>
              <th width="5%" ng-if="::!PERMISSIONS.student && vm.currentClassId" class="text-center"><a ng-click="vm.onClickUpsertStage($event)" class="btn btn-rounded btn-primary pull-right">Crear</a></th>
            </tr>
          </thead>
          <tbody as-sortable="vm.onDragStages" ng-model="vm.stages">
            <tr as-sortable-item ng-repeat="item in vm.stages track by item._id" id="{{item._id}}" ng-class="{active: item._id === vm.currentStageId, disabled: PERMISSIONS.student && !item.enableBySchedule}">
              <td ng-bind="item.name" ng-click="vm.onClickShowModules($event, item)"></td>
              <td ng-if="::PERMISSIONS.student" class="text-center">
                <i ng-if="::!item.enableBySchedule" class="fa fa-lock"></i>
                <uib-progressbar ng-if="::item.enableBySchedule && item.progress > 0 && item.progress < 100" class="progress-striped text-center" value="item.progress"></uib-progressbar>
                <i ng-if="::item.enableBySchedule && item.progress >= 100" class="fa fa-check"></i>
              </td>
              <!-- <td ng-if="::!PERMISSIONS.student" ng-bind="item.order"></td> -->
              <td ng-if="::!PERMISSIONS.student" class="btn-delete text-center" ng-click="vm.onClickUpsertStage($event, item)">
                <i class="fa fa-edit"></i>
              </td>
              <td as-sortable-item-handle ng-if="::!PERMISSIONS.student" class="btn-delete text-center">
                <i class="fa fa-arrows"></i>
              </td>
              <td ng-if="::!PERMISSIONS.student" class="btn-delete text-center" ng-click="vm.onClickRemoveStage($event, item._id)">
                <i class="fa fa-times"></i>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="col-md-4" ng-if="vm.modules.length || vm.currentStageId">
        <div class="table-responsive">
          <table class="table table-hover">
            <thead>
              <tr>
                <th>Contenidos</th>
                <th width="5%" class="text-center">TP</th>
                <th width="5%" ng-if="::PERMISSIONS.student" class="text-center">&nbsp;</th>
                <th width="5%" ng-if="::!PERMISSIONS.student" class="text-center">&nbsp;</th>
                <!-- <th ng-if="::!PERMISSIONS.student" ng-click="vm.onClickOrderBy('order')">Orden</th> -->
                <th width="5%" ng-if="::!PERMISSIONS.student && vm.currentStageId" class="text-center"><a ng-click="vm.onClickUpsertModule($event)" class="btn btn-rounded btn-primary pull-right">Crear</a></th>
              </tr>
            </thead>
            <tbody as-sortable="vm.onDragModules" ng-model="vm.modules">
              <tr as-sortable-item ng-repeat="item in vm.modules track by item._id" id="{{item._id}}">
                <td ng-bind="item.name" ng-click="vm.onClickEditModule($event, item._id)"></td>
                <td width="5%" class="text-center">
                  <i ng-if="item.tp" class="fa fa-file-code-o" aria-hidden="true"></i>
                </td>
                <td width="5%" class="text-center" ng-if="::PERMISSIONS.student">
                  <i ng-if="item.completed" class="fa fa-check" aria-hidden="true"></i>
                </td>
                <td as-sortable-item-handle ng-if="::!PERMISSIONS.student" class="btn-delete text-center">
                  <i class="fa fa-arrows"></i>
                </td>
                <!-- <td width="5%" ng-if="::!PERMISSIONS.student" ng-bind="item.order"></td> -->
                <td width="5%" ng-if="::!PERMISSIONS.student" class="btn-delete text-center" ng-click="vm.onClickRemoveModule($event, item._id)">
                  <i class="fa fa-times"></i>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <div class="row" ng-if="!vm.classes.length">
      <div class="col-md-12">
        <p>No hay cursos...</p>
      </div>
    </div>
  </div>
</div>
